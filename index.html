<!DOCTYPE html>
<html dir="auto" lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="favicon.ico" />
  <script src="jquery.js"></script>
  <script>
  document.querySelectorAll('div[id^="id-"]').forEach(function(el) {
    el.addEventListener('click', function() {
      navigator.clipboard.writeText(this.innerText);
    });
  });
  </script>
  <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet" type="text/css" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ø²ÛŒØ±Ú© - Ø§ÙˆÙ„ÛŒÙ† Ø³Ø±ÙˆÛŒØ³ Ø±Ø§ÛŒÚ¯Ø§Ù† Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div id="app">
    <div class="header">
      <img src="favicon.ico" alt="logo" />
      <h1 style="color:rgb(211, 64, 11);">Ø²ÛŒØ±Ú© - Ø§ÙˆÙ„ÛŒÙ† Ø³Ø±ÙˆÛŒØ³ Ø±Ø§ÛŒÚ¯Ø§Ù† Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ</h1>
      <i class='fa fa-github' style='font-size:15px;color: rgb(226, 75, 190)'>&nbsp;<a style="color:rgb(120, 161, 202)" href="https://github.com/bugbounted">Made With ðŸ§  by Mohamad Samardeh</a></i>
    </div>
    <div id="chat_container"></div>
    <form>
      <textarea name="prompt" id="txt" rows="1" cols="1" placeholder="Ø§Ø²Ø´ Ø¨Ù¾Ø±Ø³"></textarea>
      <button type="submit" id="send"><img src="assets/send.svg" alt="send" />
    </form>
    <div class="microphone">
      <button id="mic" style="position:relative;top:-20px;font-size:20px;color:rgb(230, 123, 22)">ØªØ§Ú† Ú©Ù†ÛŒØ¯ Ùˆ Ù‡Ù…Ø²Ù…Ø§Ù† ØµØ­Ø¨Øª Ú©Ù†ÛŒØ¯<i id="mes" class="fa fa-microphone" style="font-size:25px;color:red"></i></button>
    </div>
  </div>
  <script>
    var speak = document.getElementById('mic');
    var textarea = document.getElementById('txt');
    var SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    var recognition = new SpeechRecognition();
    speak.addEventListener('click', function () {
      textarea.innerHTML='';
      recognition.start();
      document.getElementById("mic").innerHTML = "ØªØ´Ø®ÛŒØµ ØµØ¯Ø§ Ø±ÙˆØ´Ù† Ø§Ø³Øª"
    })
    recognition.onresult = function (e) {
      var transcript = e.results[0][0].transcript;
      console.log(transcript)
      textarea.innerHTML = transcript;
    // }
    // recognition.onspeechend = function () {
      recognition.stop();
      document.getElementById("txt").focus();
      document.getElementById("send").click();
      document.getElementById("mic").innerHTML = "ØªØ§Ú† Ú©Ù†ÛŒØ¯ Ùˆ Ù‡Ù…Ø²Ù…Ø§Ù† ØµØ­Ø¨Øª Ú©Ù†ÛŒØ¯"
      document.getElementById("mic").insertAdjacentHTML('beforeEnd', '<i class="fa fa-microphone" style="font-size:20px;color:red"></i>');
    };   
    recognition.onerror = function () {
      document.getElementById("mic").innerHTML = "Ø¨Ø±ÙˆØ² Ø®Ø·Ø§ ØŒ Ù…Ø¬Ø¯Ø¯ ØªÙ„Ø§Ø´ Ú©Ù†ÛŒØ¯"
      document.getElementById("mic").insertAdjacentHTML('beforeEnd', '<i class="fa fa-microphone" style="font-size:20px;color:red"></i>');
    }
  </script>
  <script type="module" src="script.js"></script>
</body>

</html>
